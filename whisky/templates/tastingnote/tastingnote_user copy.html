{% extends 'home.html' %}  

{% load static %}

{% block sidebar0 %}
{{ block.super }}
{% endblock %}

{% block css1 %}
  <link rel="stylesheet" type="text/css" href="{% static 'style_labelscanner.css'%}">
{%endblock%}


{% block sidebar1 %}
<br>

<div class="card h-100 p-20" style="text-align:center">
    <div class="row">
        <div class="col" style="text-align:center">
            <br>
                {% if tastingnoteuser.profileimage %}
                <img class="ui medium centered circular bordered image" style="object-fit: cover;"  src="{{tastingnoteuser.profileimage.url}}">
                {% else %}
                <img class="ui medium centered circular bordered image" style="object-fit: cover;"  src="https://produits.bienmanger.com/2943-0w0h0_Monkey_Shoulder_Triple_Malt_Scotch_Whisky.jpg">No Profile Image
                {% endif %}
            <br>
        </div>
        <div class="col" style="text-align:center">
            <br>
            <hr>
            <div class="row">
                <p class="h3"><i class="user outline icon"></i>&nbsp;<strong>{{tastingnoteuser.nickname}}</strong></p>
                <p class="h5">{{tastingnoteuser.username}}</p>
            </div>
            <hr>
            <br>
            <div class="row">
                <div class="ui mini two statistics">
                    <div class="statistic">
                        <div class="value">
                            <i class="heart icon"></i> {{followers}}
                        </div>
                        <br>
                        <div class="label">
                            Followers
                        </div>
                    </div>
                    <div class="statistic">
                        <div class="value">
                            <i class="heart outline icon"></i> {{following}}
                        </div>
                        <br>
                        <div class="label">
                            Following
                        </div>
                        <br><br>
                    </div>
                </div>
                <br><br>
                <div class="col">
                    <div class="card" style="padding:10px;">
                        <a href="{% url 'tastingnote:userfollow_tastingnote' tastingnoteuser.id %}"><h3>{{followbutton}}</h3></a>
                    </div>
                </div>
            </div>
            <br>
            <!-- <div class="ui vertical divider">
                <i class="paw icon"></i>
            </div> -->
        </div>
    </div>
</div>

<br>

<!-- 사진들만 전시, 클릭할 경우 이동 -->
<h3 id="showcase" class="ui top attached violet header">
    <i class="angle right icon"></i>Showcase
</h3>
<br>
<div class="ui centered cards">
    {% for m in images %}
    <div class="red card" style="height: 23vh; width: 19vw;" >
        <img id="imagetag" style="height: 100%; object-fit: cover;" src="{{ m.image.url }}" onclick="location.href='#{{m.id}}'">
    </div>
    {% endfor %}
</div>
<br>
<br>
<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
    {% if images.has_previous %}
    <li class="page-item"><a class="page-link" href="?page={{images.previous_page_number}}">Previous</a></li>
    {% else %}
    <li class="page-item disabled"><a class="page-link" href="">Previous</a></li>
    {% endif %}
    
    <li class="page-item disabled"><a class="page-link" href="">{{images.number}}/{{images.paginator.num_pages}}</a></li>
    
    {% if images.has_next %}
    <li class="page-item"><a class="page-link" href="?page={{images.next_page_number}}">Next</a></li>
    {% else %}
    <li class="page-item disabled"><a class="page-link" href="">Next</a></li>
    {% endif %}
  </ul>
</nav>
<br>

<hr>


<!-- 테이스팅노트들 전시 -->

{% if images %}
<h3 id="Tasting Note" class="ui top attached purple header">
    <i class="angle right icon"></i>Tasting Note
</h3>
<br>
<div class="row">
    {% for m in images %}
    <div class="col-lg-4 col-md-6 col-sm-12 pb-4">
        <div class="card h-100 p-4">

            <p style="text-align:right">{{m.pub_date}}</p>    
            <div class="card h-10 p-2">
                <h3 style="text-align:center">{{m.whiskyname}}</h3>
            </div>
            <img id="{{m.id}}" src="{{ m.image.url }}" class="card-img-top">

            <!-- 노트 추가 / 노트보기 버튼 -->            
            <br>
            <div class="row" >
                <div class="col" style="text-align:center">
                    <div class="card h-10 p-2">
                        <a id="buttondesign" onclick="myFunction({{m.id}})">
                            <p style="text-align:center">
                                <i class="list icon"></i>View notes
                            </p>
                        </a>    
                    </div>
                </div>
            </div>

            <br>


            <!-- 클릭하면 밑에 열림. 테이스팅노트 한줄평 완료 -->
            
            <!-- 테이스팅 노트들 -->
            <div id="myDIV{{m.id}}">
                {% for n in m.tastingnotemodel_set.all %} 
                <div class="card h-10 p-4">
                    <div class="row">
                        <div class="col">
                            <p style="text-align:right">{{n.pub_date}}</p>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <h3><i class="paw icon"></i>{{n.name}}</h3>
                    </div>
                    <br>
  
                    <table class="table" >

                    <thead>
                        <tr>
                        <th style="width:40%; text-align:center;">Category</th>
                        <th style="width:60%; text-align:center;">Rating</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="center aligned">
                        <td>
                            Barrel Rating
                        </td>
                        <td style="text-align:center;">
                            <p>
                            {% if n.drumtong_rating == 1 %}
                            <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top">
                            {% elif n.drumtong_rating == 2 %}
                            <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top">
                            {% elif n.drumtong_rating == 3 %}
                            <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top">
                            {% elif n.drumtong_rating == 4 %}
                            <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top">
                            {% elif n.drumtong_rating == 5 %}
                            <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top"> <img src="{%static 'img/base/mainlogoimg.png'%}" alt="" width="15" height="20" class="d-inline-block align-text-top">
                            {% endif %}
                            </p>
                        </td>
                        </tr>
                        <tr class="center aligned">
                        <td>
                            Taste
                        </td>
                        <td style="text-align:center;">
                            {{n.taste}} ({{n.taste_intensity}})
                        </td>
                        </tr>
                        <tr class="center aligned">
                        <td>
                            Flavor
                        </td>
                        <td style="text-align:center;">
                            {{n.flavor}} ({{n.flavor_intensity}})
                        </td>
                        </tr>
                        <tr class="center aligned">
                        <td>
                            Alchol Finish
                        </td>
                        <td style="text-align:center;">
                            {{n.alchol_finish}}
                        </td>
                        </tr>
                        <tr>
                            <td colspan='2' class="center aligned">
                            One Line Review
                            <br>
                            &nbsp;&nbsp;&nbsp;·&nbsp;&nbsp;&nbsp;{{n.one_line_review}}
                            </td>
                        </tr>

                    </tbody>
                    </table>
                    

                </div>
                <br>
    
                {% empty %}
                <div class="card h-100 p-4">
                    <p>No TastingNote added.</p>
                </div>
                {% endfor %}
            </div>


        </div>
    </div>
    {% empty %}
    <p>No whisky added.</p>
    {% endfor %}

</div>

<br>
<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
    {% if images.has_previous %}
    <li class="page-item"><a class="page-link" href="?page={{images.previous_page_number}}">Previous</a></li>
    {% else %}
    <li class="page-item disabled"><a class="page-link" href="">Previous</a></li>
    {% endif %}
    
    <li class="page-item disabled"><a class="page-link" href="">{{images.number}}/{{images.paginator.num_pages}}</a></li>
    
    {% if images.has_next %}
    <li class="page-item"><a class="page-link" href="?page={{images.next_page_number}}">Next</a></li>
    {% else %}
    <li class="page-item disabled"><a class="page-link" href="">Next</a></li>
    {% endif %}
  </ul>
</nav>





<br><hr><br>


<!-- 맨위로 버튼 생성 -->
<div style="position:fixed; bottom:50px; right:15px;">
    <a href="#showcase" style="color:#000000"><i class="large caret square up outline icon"></i>Top</a>
</div>


{% else %}
    <br><br><br>
    <h3 style="text-align:center">Login! Add your note!</h3>
    <!-- 버튼으로 노트 추가할 수 있게 만들기 -->
    <br><br><br>
{% endif %}



{%endblock%}
