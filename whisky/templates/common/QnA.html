{% extends 'base.html' %}  

{% load static %}

{% block sidebar0 %}
{% endblock %}


{% block sidebar1 %}
<br>
<h2 class="text-center">Q & A</h2>
<br>
<div class="container">
    <table class="table table-striped">
        <thead class="text-center">
            <tr>
                <th>No.</th>
                <th>Title</th>
                <th>Questioner</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            {% for n in question %}
                {% if n.is_public is False %}
                    {% if n.questioner == request.user %}
                    <tr>
                        <th>{{n.id}}</th>
                        <th>
                            <a data-bs-toggle="collapse" href="#collapseExample{{n.id}}" style="color:#000000">
                                <i class="lock icon"></i>{{n.question_title}}
                            </a>
                        </th>
                        <th>{{n.questioner}}</th>
                        <th>{{n.pub_date.date}}</th>
                    </tr>

                    <div class="collapse" id="collapseExample{{n.id}}">
                        <div class="ui blue segment">
                            <strong>{{n.question_title}}</strong>
                            <br>
                            Q : {{n.question}}
                        </div>
                        {% for m in n.qnaanswermodel_set.all%}
                            <div class="ui red segment">
                                A : {{m.answer}}
                            </div>
                        {% endfor %}
                    <br>
                    </div>
                    {% else %}
                    <tr>
                        <th>{{n.id}}</th>
                        <th>
                            <a data-bs-toggle="collapse" style="color:#000000">
                                <i class="lock icon"></i>Secret Question
                            </a>
                        </th>
                        <th>Anonymous</th>
                        <th>{{n.pub_date.date}}</th>
                    </tr>

                    {% endif %}


                {% else %}
                <tr>
                    <th>{{n.id}}</th>
                    <th>
                        <a data-bs-toggle="collapse" href="#collapseExample{{n.id}}" style="color:#000000">
                            <i class="unlock icon"></i>{{n.question_title}}
                        </a>
                    </th>
                    <th>{{n.questioner}}</th>
                    <th>{{n.pub_date.date}}</th>
                </tr>
                
                <div class="collapse" id="collapseExample{{n.id}}">
                    <div class="ui blue segment">
                        <strong>{{n.question_title}}</strong>
                        <br>
                        Q : {{n.question}}
                    </div>
                    {% for m in n.qnaanswermodel_set.all%}
                        {% if m.is_public is False %}
                            {% if n.questioner == request.user %}
                            <div class="ui red segment">
                                A : {{m.answer}}
                            </div>
                            {%else%}
                            <div class="ui red segment">
                                A : Secret Answer
                            </div>
                            {%endif%}
                        {% else %}
                        <div class="ui red segment">
                            A : {{m.answer}}
                        </div>
                        {% endif %}
                    {% endfor %}
                <br>
                </div>
                {% endif %}
            {% endfor %}

        </tbody>
    

    </table>

    <br>
    <form action="">
        <div class="ui grey segment">
            <i class="write icon"></i>Question Title
            <textarea class="fluid" name="question_write" maxlength="50" id="" cols="40%" rows="1" style="width:100%;"></textarea>
            <br><br>
            <i class="write icon"></i>Ask a question
            <textarea class="fluid" name="question_write" maxlength="1000" id="" cols="40%" rows="5" style="width:100%;"></textarea>
            &nbsp; Public : &nbsp; {{form.is_public}}
        </div>
        <div style="text-align:right;">
            <button type="submit" class="ui blue labeled icon button" id="submit-file">
                <i class="icon edit"></i>Submit
            </button>
        </div>
    </form>
    <hr>
    

    <div class="text-center">
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
              {% if question.has_previous %}
              <li class="page-item"><a class="page-link" href="?page={{images.previous_page_number}}">Previous</a></li>
              {% else %}
              <li class="page-item disabled"><a class="page-link" href="">Previous</a></li>
              {% endif %}
              
              <li class="page-item disabled"><a class="page-link" href="">{{question.number}}/{{question.paginator.num_pages}}</a></li>
              
              {% if question.has_next %}
              <li class="page-item"><a class="page-link" href="?page={{images.next_page_number}}">Next</a></li>
              {% else %}
              <li class="page-item disabled"><a class="page-link" href="">Next</a></li>
              {% endif %}
            </ul>
          </nav>
    </div>

    

</div>







{%endblock%}